{% extends "main/base.html" %}

{% block content %}
    {% include "main/header.html" %}

    <div class="col-6">
        <form id="editor" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <!-- Edit deck details -->
            Deck name:
            <div class="input-group mb-3">
                <input type="text" id="name" placeholder="Enter a title." required class="form-control">
            </div>
            Description:
            <div class="input-group mb-3">
                <textarea id="description" placeholder="Write a short description..." style="resize: none" class="form-control"></textarea>
            </div>
            <div class="text-center">
                <button id='save-btn' type="button" disabled class="btn btn-success">Save</button>
            </div>
            <input type="hidden" id="uuid" value="{{ request.GET.uuid }}">
            <hr>
    
            <!-- Edit cards -->
            <div id="container" class="container">
                {% for card in cards %}
                    {% include "main/card_view_template.html" %}
                {% endfor %}
            </div>
            <button id='new-card' type="button" class="btn btn-secondary col-12 mb-3">+ Add new card +</button>
        </form>
    </div>
{% endblock content %}

{% block script %}
    <script>
        const rawDeck = '{{ deck }}'.replace(/&#x27;/g, '"')
        const rawCards = '{{ cards }}'.replace(/&#x27;/g, '"').replace(/&quot;/g, '\'').replace(/&lt;/g, '<').replace(/&gt;/g, '>')
        const cardTemplate = '{{ template }}'.replace(/&quot;/g, '"').replace(/&lt;/g, '<').replace(/&gt;/g, '>')
    </script>

    {% load static %}
    <script src="{% static 'js/editor.js' %}"></script>
{% endblock script %}